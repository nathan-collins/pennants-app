<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">

<link rel="import" href="../pennants-grade/pennants-grade.html">
<link rel="import" href="../pennants-admin/pennants-admin.html">

<!--
`pennants-season`
A list of seasons for a pennants
@demo demo/index.html
-->

<dom-module id="pennants-season">
  <template strip-whitespace>
    <style is="custom-style">
      :host {
        position: relative;
        overflow: hidden;
        cursor: default;
      }

      paper-tabs {
        --paper-tabs: {
          margin: 10px 0px 0px 10px;
        }
        --paper-tabs-container: {

        }
        --paper-tabs-content: {

        }
      }

      paper-tab {
        --paper-tab-ink: #ffff8d;
        --paper-tab: {
          background-color: #ddd;
          border: 1px solid #bbb;
          margin-right: 10px;
          flex: none;
        }
        --paper-tab-content: {
          height: auto
        }
      }

      #season-container {
        padding: 10px;
        font-size: 2em;
        background-color: #eee;
        border-bottom: 1px solid #bbb;
        border-top: 1px solid #bbb;
      }
    </style>

    <firebase-query
      id="gradesQuery"
      app-name="pennants-app"
      path="{{gradesPath}}"
      data="{{grades}}">
    </firebase-query>

    <app-indexeddb-mirror
      key="grades"
      data="{{grades}}"
      persisted-data="{{gradesData}}">
    </app-indexeddb-mirror>

    <slot>
      <div>
        <paper-tabs selected="{{selectedValue}}" id="seasonTabs" attr-for-selected="value">
          <template is="dom-repeat" items="{{seasons}}" as="season">
            <paper-tab value="{{index}}">
              <a href="#" class="season-link">
                <span>[[season.name]]</span>
              </a>
            </paper-tab>
          </template>
          <template is="dom-if" if="{{_isAdminLoggedIn()}}">
            <pennants-admin page="season" page-title="Season"></pennants-admin>
          </template>
        </paper-tabs>
        <iron-pages selected="{{selectedValue}}" id="seasonPages">
          <template is="dom-repeat" items="{{seasons}}" as="season">
            <div id="season-container">
              <pennants-grade grades="{{gradesData}}" season-id="{{seasonId}}"></pennants-grade>
            </div>
          </template>
        </iron-pages>
      </div>
    </slot>
  </template>
  <script src="pennants-season.js"></script>
</dom-module>
